/** @jsx jsx */

import { css, jsx } from '@emotion/react';
import { heights } from '../../variants/shared/xcss';
import { SplitButtonContext } from './split-button-context';
import { getActions } from './utils';
const baseDividerStyles = css({
  display: 'inline-flex',
  width: '1px',
  position: 'relative',
  zIndex: 2
});
const defaultDividerStyles = css({
  height: heights.default
});
const compactDividerStyles = css({
  height: heights.compact
});
const dividerDisabledStyles = css({
  backgroundColor: "var(--ds-text-disabled, #091E4224)",
  cursor: 'not-allowed'
});
const navigationDividerStyles = css({
  height: '16px',
  margin: `${"var(--ds-space-100, 8px)"} -0.5px`,
  backgroundColor: "var(--ds-text-subtle, #0052cc)",
  opacity: 0.62
});
const dividerAppearance = {
  default: css({
    backgroundColor: "var(--ds-text, #172B4D)",
    opacity: 0.51
  }),
  primary: css({
    backgroundColor: "var(--ds-text-inverse, #FFF)",
    opacity: 0.64
  }),
  navigation: navigationDividerStyles
};
const dividerHeight = {
  default: defaultDividerStyles,
  compact: compactDividerStyles
};
/**
 * TODO: Add JSDoc
 */
export const Divider = ({
  appearance,
  spacing,
  isDisabled = false
}) => {
  return (
    // I find it funny to provide a div for Divider
    jsx("div", {
      css: [baseDividerStyles, dividerHeight[spacing], dividerAppearance[appearance], isDisabled ? dividerDisabledStyles : undefined]
    })
  );
};
const splitButtonStyles = css({
  display: 'inline-flex',
  position: 'relative',
  alignItems: 'center',
  whiteSpace: 'nowrap'
});
const primaryButtonStyles = css({
  // eslint-disable-next-line @atlaskit/design-system/no-nested-styles
  'button,a': {
    borderEndEndRadius: 0,
    borderStartEndRadius: 0
  }
});
const secondaryButtonStyles = css({
  // eslint-disable-next-line @atlaskit/design-system/no-nested-styles
  'button,a': {
    borderEndStartRadius: 0,
    borderStartStartRadius: 0
  }
});
/**
 * TODO: Add JSdoc
 */
export const SplitButtonContainer = ({
  children
}) => {
  return jsx("div", {
    css: splitButtonStyles
  }, children);
};

/**
 * __Split Button__
 *
 * A split button lets people perform an action or choose from a small group of similar actions.
 *
 * - [Examples](https://atlassian.design/components/button/split-button/examples)
 * - [Code](https://atlassian.design/components/button/split-button/code)
 * - [Usage](https://atlassian.design/components/button/split-button/usage)
 */
export const SplitButton = ({
  children,
  appearance = 'default',
  spacing = 'default',
  isDisabled = false
}) => {
  const {
    PrimaryAction,
    SecondaryAction
  } = getActions(children);
  return jsx(SplitButtonContainer, null, jsx(SplitButtonContext.Provider, {
    value: {
      appearance,
      spacing,
      isDisabled
    }
  }, jsx("div", {
    css: primaryButtonStyles
  }, PrimaryAction), jsx(Divider, {
    appearance: appearance,
    spacing: spacing,
    isDisabled: isDisabled
  }), jsx("div", {
    css: secondaryButtonStyles
  }, SecondaryAction)));
};
/**
 * TODO: Decide on API
 */
export const SplitButtonWithSlots = ({
  primaryAction,
  secondaryAction,
  appearance = 'default',
  spacing = 'default',
  isDisabled = false
}) => {
  return jsx(SplitButtonContainer, null, jsx(SplitButtonContext.Provider, {
    value: {
      appearance,
      spacing,
      isDisabled
    }
  }, jsx("div", {
    css: primaryButtonStyles
  }, primaryAction), jsx(Divider, {
    appearance: appearance,
    spacing: spacing,
    isDisabled: isDisabled
  }), jsx("div", {
    css: secondaryButtonStyles
  }, secondaryAction)));
};